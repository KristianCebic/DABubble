<div class="side-nav-container">
  <div id="searchMobileDiv">
    <app-search-component placeholder="Gehe zu..."></app-search-component>
    <img id="searchImg" src="assets/img/search.png" alt="" />
  </div>

  <!-- 1 Section - Devspace Section -->
  <div id="devSpace" class="dFlex">
    <div class="devSpace">
      <img src="assets/img/main/workspace-logo.svg" />
      <span class="font-size1">Devspace</span>
    </div>

    <button class="icon-btn" (click)="newMessage()">
      <span class="material-symbols-rounded">edit_square</span>
    </button>
  </div>

  <!-- 2 Section -->
  <div class="gap25 divWidth channels-messages-container">
    <!-- Channels, Channel hinzufügen -->
    <div class="gap25 dFlex">
      <div class="dFlex channels">
        <div class="dFlex1 cursor-pointer purpleHover" (click)="openChannels()">
          <span *ngIf="channelsOpened" class="material-symbols-rounded"
            >arrow_drop_down</span
          >
          <img
            *ngIf="!channelsOpened"
            class="changeArrowRightBlue"
            src="assets/img/main/arrow_right.png"
          />

          <div>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
            >
              <mask
                id="mask0_83172_10662"
                style="mask-type: alpha"
                maskUnits="userSpaceOnUse"
                x="0"
                y="0"
                width="24"
                height="24"
              >
                <rect width="24" height="24" fill="#D9D9D9" />
              </mask>
              <g mask="url(#mask0_83172_10662)">
                <path
                  d="M6 21C4.9 21 3.95833 20.6083 3.175 19.825C2.39167 19.0417 2 18.1 2 17C2 15.9 2.39167 14.9583 3.175 14.175C3.95833 13.3917 4.9 13 6 13C7.1 13 8.04167 13.3917 8.825 14.175C9.60833 14.9583 10 15.9 10 17C10 18.1 9.60833 19.0417 8.825 19.825C8.04167 20.6083 7.1 21 6 21ZM18 21C16.9 21 15.9583 20.6083 15.175 19.825C14.3917 19.0417 14 18.1 14 17C14 15.9 14.3917 14.9583 15.175 14.175C15.9583 13.3917 16.9 13 18 13C19.1 13 20.0417 13.3917 20.825 14.175C21.6083 14.9583 22 15.9 22 17C22 18.1 21.6083 19.0417 20.825 19.825C20.0417 20.6083 19.1 21 18 21ZM6 19C6.55 19 7.02067 18.8043 7.412 18.413C7.804 18.021 8 17.55 8 17C8 16.45 7.804 15.9793 7.412 15.588C7.02067 15.196 6.55 15 6 15C5.45 15 4.97933 15.196 4.588 15.588C4.196 15.9793 4 16.45 4 17C4 17.55 4.196 18.021 4.588 18.413C4.97933 18.8043 5.45 19 6 19ZM18 19C18.55 19 19.021 18.8043 19.413 18.413C19.8043 18.021 20 17.55 20 17C20 16.45 19.8043 15.9793 19.413 15.588C19.021 15.196 18.55 15 18 15C17.45 15 16.979 15.196 16.587 15.588C16.1957 15.9793 16 16.45 16 17C16 17.55 16.1957 18.021 16.587 18.413C16.979 18.8043 17.45 19 18 19ZM12 11C10.9 11 9.95833 10.6083 9.175 9.825C8.39167 9.04167 8 8.1 8 7C8 5.9 8.39167 4.95833 9.175 4.175C9.95833 3.39167 10.9 3 12 3C13.1 3 14.0417 3.39167 14.825 4.175C15.6083 4.95833 16 5.9 16 7C16 8.1 15.6083 9.04167 14.825 9.825C14.0417 10.6083 13.1 11 12 11ZM12 9C12.55 9 13.021 8.804 13.413 8.412C13.8043 8.02067 14 7.55 14 7C14 6.45 13.8043 5.97933 13.413 5.588C13.021 5.196 12.55 5 12 5C11.45 5 10.9793 5.196 10.588 5.588C10.196 5.97933 10 6.45 10 7C10 7.55 10.196 8.02067 10.588 8.412C10.9793 8.804 11.45 9 12 9Z"
                  fill="black"
                />
              </g>
            </svg>
            <span class="font-size2">Channels</span>
          </div>
        </div>

        <button class="icon-btn" (click)="openCreateChannels()">
          <span class="material-symbols-rounded">add</span>
        </button>
      </div>
      <div *ngIf="channelsOpened" class="dFlexColumn gap25 slideIn_Out divWidth" style="align-items: flex-start;">
        <div class="divWidth dFlexColumn gap25 divWidth" style="overflow: auto; align-items: flex-start;">
          @for (channel of myChannels(); track channel.name; let i = $index) {
            <div [ngClass]="{'channelWasChosen': chatService.getSelectedChannelId() === channel.id}" class="channel-name-container dFlexRowFlex-StartCenter" (click)="chatService.openChannel(channel.id)">
              <span id="tag" class="material-symbols-rounded cursor-pointer">tag</span>
              <span>{{channel.name}}</span>
            </div>
            }
            
        </div>

        <div
          class="purpleHover cursor-pointer channel"
          (click)="openCreateChannels()"
        >
          <span class="material-symbols-rounded cursor-pointer purpleHover"
            >add_circle</span
          >

          <span class="cursor-pointer purpleHover">Channel hinzufügen</span>
        </div>
      </div>
    </div>

    <!-- Direktnachrichten, Kontakte  -->
    <div id="contacts" class="contactDiv divWidth gap25">
      <!-- Direktnachrichten -->
      <div class="dFlex2 divWidth directMessages purpleHover" (click)="closeContactDiv()">
        <span
          *ngIf="sideNavService.contactsOpened"
          class="material-symbols-rounded cursor-pointer"
          >arrow_drop_down</span
        >
        <img
          *ngIf="!sideNavService.contactsOpened"
          class="changeArrowRightBlue cursor-pointer"
          src="assets/img/main/arrow_right.png"
        />

        <div>
          <span class="material-symbols-rounded cursor-pointer"
            >account_circle</span
          >

          <span class="font-size2 cursor-pointer">Direktnachrichten</span>
        </div>
      </div>

      <!-- contacts -->
      <div class="gap13" *ngIf="sideNavService.contactsOpened">
        <div
          *ngFor="let user of userService.allUsers(); let i = index"
          class="contactsDiv"
          (click)="chatService.openChat(user.userUID)"
        >
          <div class="profil-status-container">
            <img class="avatar avatar-50" [src]="user.avatar" />
            <div
              class="status-circle"
              [ngClass]="user.isOnline ? 'status-online' : 'status-offline'"
            ></div>
          </div>
          <span id="{{ i }}">
            @if(userService.currentOnlineUser().name == user.name) {
            {{ userService.allUsers()[i].name + " (Du)" }}
            } @else {
            {{ userService.allUsers()[i].name }}
            }
          </span>
        </div>
      </div>
    </div>
    <!-- mobile version button for new message -->
    <div class="dFlexRowFlexEndCenter width-100 mobileVersion">
      <!-- <img
        src="assets/img/main/newMessageButton.svg"
        alt="new message button"
        (click)="newMessage()"
      /> -->
      <div class="icon-btn new-message-btn" (click)="newMessage()">
        <span class="material-symbols-rounded">edit_square</span>
      </div>
    </div>
  </div>
</div>
